"use strict";(self.webpackChunkchatgptbox=self.webpackChunkchatgptbox||[]).push([[694],{6935:(e,t,n)=>{var r=n(5861),a=n(4687),o=n.n(a),s=n(8542),i=n(6400),c=n(8889),u=n(9062);const l={init:(p=(0,r.Z)(a.mark((function e(t,n,o,s){var i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=document.getElementById("wrapper_wrapper"),c=new MutationObserver(function(){var e=(0,r.Z)(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return"childList"===e.type&&(0,u.Z)(e.addedNodes).some((function(e){return"container"===e.id}))}))){e.next=5;break}return e.next=3,o(L.baidu.inputQuery);case 3:e.sent&&s(L.baidu,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.observe(i,{childList:!0})}catch(e){}return e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return p.apply(this,arguments)})};var p,d=n(4487);const f={init:function(){var e=(0,r.Z)(a.mark((function e(t,n,o,s){var i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=location.href,c=function(){var e=(0,r.Z)(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:location.href!==i&&(i=location.href,s(L.bilibili,n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),window.setInterval(c,500)}catch(e){}return e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),inputQuery:(m=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c,u,l,p,f,m,h,y,v,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=location.pathname.replace("video","").replaceAll("/",""),r=Number(new URLSearchParams(location.search).get("p")||1)-1,e.next=5,fetch("https://api.bilibili.com/x/player/pagelist?bvid=".concat(n));case 5:return o=e.sent,e.next=8,o.json();case 8:return s=e.sent,i=s.data,c=i[r].cid,u=0===r&&(null===(t=document.querySelector(".video-title"))||void 0===t?void 0:t.textContent)||i[r].part,e.next=14,fetch("https://api.bilibili.com/x/player/v2?bvid=".concat(n,"&cid=").concat(c),{credentials:"include"});case 14:return l=e.sent,e.next=17,l.json();case 17:return p=e.sent,f=p.data.subtitle.subtitles[0].subtitle_url,e.next=21,fetch(f);case 21:return m=e.sent,e.next=24,m.json();case 24:for(h=e.sent,y=h.body,v="",b=0;b<y.length;b++)b===y.length-1?v+=y[b].content:v+=y[b].content+",";return e.next=30,(0,d.Kj)('\u7528\u5c3d\u91cf\u7b80\u7ec3\u7684\u8bed\u8a00,\u8054\u7cfb\u89c6\u9891\u6807\u9898,\u5bf9\u89c6\u9891\u8fdb\u884c\u5185\u5bb9\u6458\u8981,\u540c\u65f6\u4ecd\u8981\u4fdd\u7559\u91cd\u8981\u7ec6\u8282,\u89c6\u9891\u6807\u9898\u4e3a:"'.concat(u,'",\u5b57\u5e55\u5185\u5bb9\u4e3a:\n').concat(v));case 30:return e.abrupt("return",e.sent);case 33:e.prev=33,e.t0=e.catch(0),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,33]])}))),function(){return m.apply(this,arguments)})};var m;const h={init:function(){var e=(0,r.Z)(a.mark((function e(t,n,o,s){var i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=location.href,c=function(){var e=(0,r.Z)(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:location.href!==i&&(i=location.href,s(L.youtube,n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),window.setInterval(c,500)}catch(e){}return e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(location.href,{credentials:"include"});case 3:return e.next=5,e.sent.text();case 5:if(t=e.sent,-1!==(n=t.indexOf("https://www.youtube.com/api/timedtext"))){e.next=9;break}return e.abrupt("return");case 9:return r=(r=(r=t.substring(n)).substring(0,r.indexOf('"'))).replaceAll("\\u0026","&"),o=(o=t.substring(t.indexOf('"title":"')+9)).substring(0,o.indexOf('","')),e.next=16,fetch(r);case 16:if((s=e.sent).ok){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,s.text();case 21:for(i=e.sent,c="";-1!==i.indexOf('">');)i=i.substring(i.indexOf('">')+2),c+=i.substring(0,i.indexOf("<"))+",";return a=c,c=(new DOMParser).parseFromString(a.replaceAll("&amp;","&"),"text/html").documentElement.innerText,e.next=27,(0,d.Kj)("Provide a structured summary of the following video in markdown format, focusing on key takeaways and crucial information, and ensuring to include the video title. The summary should be easy to read and concise, yet comprehensive."+'The video title is "'.concat(o,'". The subtitle content is as follows:\n').concat(c));case 27:return e.abrupt("return",e.sent);case 30:e.prev=30,e.t0=e.catch(0),console.log(e.t0);case 33:case"end":return e.stop()}var a}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}()};var y=function(){var e=(0,r.Z)(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=location.origin+location.pathname+".patch",e.next=3,fetch(t,{method:"HEAD"}).catch((function(){return{}}));case 3:if(!e.sent.ok){e.next=6;break}return e.abrupt("return",t);case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,d.Rm)(t,40960);case 4:return n=(n=e.sent).substring(n.indexOf("---")),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){return location.href.match(/\/pull\/\d+$/)},g=function(){return location.href.match(/\/issues\/\d+$/)};function x(){function e(e){return{date:e.querySelector("relative-time").getAttribute("datetime"),author:(e.querySelector(".author")||e.querySelector(".author-name")).textContent.trim(),body:e.querySelector(".comment-body").textContent.trim()}}var t;return{title:document.querySelector(".js-issue-title").textContent.trim(),messages:function(){var t=document.querySelectorAll(".timeline-comment-group"),n=Array.from(t).map(e);return[e(document.querySelector(".js-comment-container"))].concat((0,u.Z)(n))}(),commentBoxContent:(t=document.querySelector(".js-new-comment-form textarea"))?t.value:""}}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.title,r=e.messages,a=e.commentBoxContent,o="";return o=t?"Please summarize the following GitHub issue thread.\nWhat is the main issue and key points discussed in this thread?\n\n":"Please summarize the following GitHub pull request thread.\nWhat is the main issue this pull request is trying to solve?\n\n",o+="---\n\n",o+="Title:\n".concat(n,"\n\n"),r.forEach((function(e,t){o+="Message ".concat(t+1," by ").concat(e.author," on ").concat(e.date,":\n").concat(e.body,"\n\n")})),a&&(o+="---\n\n",o+="Draft message in comment box:\n".concat(a,"\n\n")),o}const k={init:function(){var e=(0,r.Z)(a.mark((function e(t,n,o,s){var i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=location.href,c=function(){var e=(0,r.Z)(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(location.href===i){e.next=9;break}if(i=location.href,!b()&&!g()){e.next=5;break}return s(L.github,n),e.abrupt("return");case 5:return e.next=7,y();case 7:e.sent&&s(L.github,n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),window.setInterval(c,500)}catch(e){}return e.next=3,y();case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=b();case 6:if(e.t0=e.t1,e.t0){e.next=9;break}e.t0=g();case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b()&&!g()){e.next=7;break}return t=x(),n=w(t,g()),e.next=6,(0,d.Kj)(n);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,y();case 9:return r=e.sent,e.next=12,v(r);case 12:if(o=e.sent){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,(0,d.Kj)("Analyze the contents of a git commit,provide a suitable commit message,and summarize the contents of the commit."+"The patch contents of this commit are as follows:\n".concat(o));case 17:return e.abrupt("return",e.sent);case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}()};var C=function(){var e=(0,r.Z)(a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=location.origin+location.pathname+".patch",e.next=3,fetch(t,{method:"HEAD"});case 3:if(!e.sent.ok){e.next=6;break}return e.abrupt("return",t);case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,r.Z)(a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,d.Rm)(t,40960);case 4:return n=(n=e.sent).substring(n.indexOf("---")),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const E={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!location.pathname.includes("/blob")){e.next=12;break}return e.next=4,(0,d.Rm)(location.href.replace("/blob/","/raw/"),40960);case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.Kj)("Analyze the following file content and explain it. Use markdown syntax to make your answer more readable, such as code blocks, bold, list:"+"\n```\n".concat(t,"\n```"));case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,C();case 14:return n=e.sent,e.next=17,T(n);case 17:if(r=e.sent){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,(0,d.Kj)("Analyze the contents of a git commit,provide a suitable commit message,and summarize the contents of the commit."+"The patch contents of this commit are as follows:\n".concat(r));case 22:return e.abrupt("return",e.sent);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}()},_={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c,u,l,p,f,m,h;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=null===(t=document.querySelector(".QuestionHeader-title"))||void 0===t?void 0:t.textContent)){e.next=20;break}if(o=null===(r=document.querySelector(".QuestionRichText"))||void 0===r?void 0:r.textContent,s=".AnswerItem .RichText",i="",!location.pathname.includes("answer")){e.next=13;break}return i=null===(c=document.querySelector(s))||void 0===c?void 0:c.textContent,e.next=10,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u4e2a\u95ee\u7b54\u5e73\u53f0\u7684\u63d0\u95ee\u4e0e\u56de\u7b54\u5185\u5bb9,\u7ed9\u51fa\u76f8\u5e94\u7684\u6458\u8981,\u4ee5\u53ca\u4f60\u5bf9\u6b64\u7684\u770b\u6cd5.\u95ee\u9898\u662f:"'.concat(n,'",\u95ee\u9898\u7684\u8fdb\u4e00\u6b65\u63cf\u8ff0\u662f:"').concat(o,'".')+"\u5176\u4e2d\u4e00\u4e2a\u56de\u7b54\u5982\u4e0b:\n".concat(i));case 10:return e.abrupt("return",e.sent);case 13:for(u=document.querySelectorAll(s),l=1;l<=u.length&&l<=4;l++)i+="answer".concat(l,": ").concat(u[l-1].textContent,"|");return e.next=17,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u4e2a\u95ee\u7b54\u5e73\u53f0\u7684\u63d0\u95ee\u4e0e\u56de\u7b54\u5185\u5bb9,\u7ed9\u51fa\u76f8\u5e94\u7684\u6458\u8981,\u4ee5\u53ca\u4f60\u5bf9\u6b64\u7684\u770b\u6cd5.\u95ee\u9898\u662f:"'.concat(n,'",\u95ee\u9898\u7684\u8fdb\u4e00\u6b65\u63cf\u8ff0\u662f:"').concat(o,'".')+"\u5404\u4e2a\u56de\u7b54\u5982\u4e0b:\n".concat(i));case 17:return e.abrupt("return",e.sent);case 18:e.next=26;break;case 20:if(m=null===(p=document.querySelector(".Post-Title"))||void 0===p?void 0:p.textContent,h=null===(f=document.querySelector(".Post-RichText"))||void 0===f?void 0:f.textContent,!m){e.next=26;break}return e.next=25,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u7bc7\u6587\u7ae0,\u7ed9\u51fa\u76f8\u5e94\u7684\u6458\u8981,\u4ee5\u53ca\u4f60\u5bf9\u6b64\u7684\u770b\u6cd5.\u6807\u9898\u662f:"'.concat(m,'",\u5185\u5bb9\u662f:\n"').concat(h,'"'));case 25:return e.abrupt("return",e.sent);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}()},Q={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,t=document.querySelector(".main shreddit-post div:nth-child(4)").textContent,n=document.querySelector(".main shreddit-post div:nth-child(6) div").textContent,r=document.querySelectorAll("shreddit-comment div:nth-child(2)"),o="",s=0;s<r.length;s++)o+="answer".concat(s,":").concat(r[s].textContent,"|");return e.next=8,(0,d.Kj)("Below is the content from a social forum,giving the corresponding summary and your opinion on it."+"The title is:'".concat(t,"',and the further description of the title is:'").concat(n,"'.")+"Some answers are as follows:\n".concat(o));case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},S={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"/"!==location.pathname){e.next=3;break}return e.abrupt("return");case 3:if((t=document.querySelectorAll(".q-box.qu-userSelect--text")).length>0&&(n=t[0].textContent),r="",t.length>1)for(o=1;o<t.length;o++)r+="answer".concat(o,":").concat(t[o].textContent,"|");return e.next=9,(0,d.Kj)("Below is the content from a question and answer platform,giving the corresponding summary and your opinion on it."+"The question is:'".concat(n,"',")+"Some answers are as follows:\n".concat(r));case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},I={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=null===(t=document.querySelector("#question-header .question-hyperlink"))||void 0===t?void 0:t.textContent)){e.next=10;break}if(o=null===(r=document.querySelector(".postcell .s-prose"))||void 0===r?void 0:r.textContent,s="",(i=document.querySelectorAll(".answercell .s-prose")).length>0)for(c=1;c<=i.length&&c<=2;c++)s+="answer".concat(c,": ").concat(i[c-1].textContent,"|");return e.next=9,(0,d.Kj)("Below is the content from a developer Q&A platform. Analyze answers and provide a brief solution that can solve the question first,"+'then give an overview of all answers. The question is: "'.concat(n,'", and the further description of the question is: "').concat(o,'".')+"The answers are as follows:\n".concat(s));case 9:return e.abrupt("return",e.sent);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},O={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=null===(t=document.querySelector("#juejin > div.view-container > main > div > div.main-area.article-area > article > h1"))||void 0===t?void 0:t.textContent,o=null===(n=document.querySelector("#juejin > div.view-container > main > div > div.main-area.article-area > article > div.article-content"))||void 0===n?void 0:n.textContent,!r||!o){e.next=11;break}for(i=null===(s=document.querySelector("#juejin > div.view-container > main > div > div.main-area.article-area > article > div.author-info-block > div > div.author-name > a > span.name"))||void 0===s?void 0:s.textContent,c=document.querySelectorAll("div.content-box > div.comment-main > div.content"),u="",l=1;l<=c.length&&l<=4;l++)u+="answer".concat(l,": ").concat(u[l-1].textContent,"|");return e.next=10,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u7bc7\u6587\u7ae0,\u6807\u9898\u662f:"'.concat(r,'",\u4f5c\u8005\u662f:"').concat(i,'",\u5185\u5bb9\u662f:\n"').concat(o,'".\u5404\u4e2a\u8bc4\u8bba\u5982\u4e0b:\n').concat(u,".\u8bf7\u4ee5\u5982\u4e0b\u683c\u5f0f\u8f93\u51fa\u4f60\u7684\u56de\u7b54\uff1a\n          {\u6587\u7ae0\u6458\u8981\u548c\u6587\u7ae0\u4f5c\u8005}\n          ======\n          {\u6587\u7ae0\u603b\u7ed3\u548c\u5bf9\u6587\u7ae0\u7684\u770b\u6cd5}\n          ======\n          {\u5bf9\u8bc4\u8bba\u7684\u603b\u7ed3}\n          "));case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},q={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=null===(t=document.querySelector("#activity-name"))||void 0===t?void 0:t.textContent,o=null===(n=document.querySelector("#js_content"))||void 0===n?void 0:n.textContent,!r||!o){e.next=10;break}return i=null===(s=document.querySelector("#js_name"))||void 0===s?void 0:s.textContent,(c=document.querySelector(".qr_code_pc"))&&(c.style.right="-400px",c.style.width="400px",c.style.textAlign="left",c.style.alignItems="center",c.style.display="flex",c.style.flexDirection="column",c.style.background="transparent"),e.next=9,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u7bc7\u6587\u7ae0,\u6807\u9898\u662f:"'.concat(r,'",\u6587\u7ae0\u6765\u6e90\u662f:"').concat(i,'\u516c\u4f17\u53f7",\u5185\u5bb9\u662f:\n"').concat(o,'".\u8bf7\u4ee5\u5982\u4e0b\u683c\u5f0f\u8f93\u51fa\u4f60\u7684\u56de\u7b54\uff1a\n          {\u6587\u7ae0\u6765\u6e90\u548c\u6587\u7ae0\u6458\u8981}\n          ======\n          {\u6587\u7ae0\u603b\u7ed3}\n          ======\n          {\u5bf9\u6587\u7ae0\u7684\u770b\u6cd5}\n          '));case 9:return e.abrupt("return",e.sent);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},A={inputQuery:function(){var e=(0,r.Z)(a.mark((function e(){var t,n,r,o,s,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=null===(t=document.querySelector("main article a > span"))||void 0===t?void 0:t.textContent,s=(null===(n=document.querySelector("#article-content"))||void 0===n?void 0:n.textContent)||(null===(r=document.querySelector("#thead-gallery"))||void 0===r?void 0:r.textContent),!o||!s){e.next=14;break}if(!(c=null===(i=document.querySelector("main article h1"))||void 0===i?void 0:i.textContent)){e.next=11;break}return e.next=8,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u7bc7\u6587\u7ae0,\u8bf7\u7ed9\u51fa\u6587\u7ae0\u7684\u7ed3\u8bba\u548c3\u52305\u4e2a\u8981\u70b9.\u6807\u9898\u662f:"'.concat(c,'",\u4f5c\u8005\u662f:"').concat(o,'",\u5185\u5bb9\u662f:\n"').concat(s,'".\n          '));case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,(0,d.Kj)('\u4ee5\u4e0b\u662f\u4e00\u7bc7\u957f\u63a8\u6587,\u8bf7\u7ed9\u51fa\u6587\u7ae0\u7684\u7ed3\u8bba\u548c3\u52305\u4e2a\u8981\u70b9.\u4f5c\u8005\u662f:"'.concat(o,'",\u5185\u5bb9\u662f:\n"').concat(s,'".\n          '));case 13:return e.abrupt("return",e.sent);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()};var L={google:{inputQuery:["input[name='q']","textarea[name='q']"],sidebarContainerQuery:["#rhs"],appendContainerQuery:["#rcnt"],resultsContainerQuery:["#rso"]},bing:{inputQuery:["[name='q']"],sidebarContainerQuery:["#b_context"],appendContainerQuery:[],resultsContainerQuery:["#b_results"]},yahoo:{inputQuery:["input[name='p']"],sidebarContainerQuery:["#right",".Contents__inner.Contents__inner--sub"],appendContainerQuery:["#cols","#contents__wrap"],resultsContainerQuery:["#main-algo",".searchCenterMiddle",".Contents__inner.Contents__inner--main","#contents"]},duckduckgo:{inputQuery:["input[name='q']"],sidebarContainerQuery:[".js-react-sidebar",".react-results--sidebar"],appendContainerQuery:["#links_wrapper"],resultsContainerQuery:[".react-results--main"]},startpage:{inputQuery:["input[name='query']"],sidebarContainerQuery:[".layout-web__sidebar.layout-web__sidebar--web"],appendContainerQuery:[".layout-web__body.layout-web__body--desktop"],resultsContainerQuery:[".mainline-results"]},baidu:{inputQuery:["input[id='kw']"],sidebarContainerQuery:["#content_right"],appendContainerQuery:["#container"],resultsContainerQuery:["#content_left","#results"],action:{init:l.init}},kagi:{inputQuery:["textarea[name='q']"],sidebarContainerQuery:[".right-content-box"],appendContainerQuery:["#_0_app_content"],resultsContainerQuery:["#main","#app"]},yandex:{inputQuery:["input[name='text']"],sidebarContainerQuery:["#search-result-aside"],appendContainerQuery:[],resultsContainerQuery:["#search-result"]},naver:{inputQuery:["input[name='query']"],sidebarContainerQuery:["#sub_pack"],appendContainerQuery:["#content"],resultsContainerQuery:["#main_pack","#ct"]},brave:{inputQuery:["input[name='q']"],sidebarContainerQuery:[".sidebar"],appendContainerQuery:[],resultsContainerQuery:["#results"]},searx:{inputQuery:["input[name='q']"],sidebarContainerQuery:["#sidebar_results","#sidebar"],appendContainerQuery:[],resultsContainerQuery:["#urls","#main_results","#results"]},ecosia:{inputQuery:["input[name='q']"],sidebarContainerQuery:[".sidebar.web__sidebar"],appendContainerQuery:["#main"],resultsContainerQuery:[".mainline"]},neeva:{inputQuery:["input[name='q']"],sidebarContainerQuery:[".result-group-layout__stickyContainer-iDIO8"],appendContainerQuery:[".search-index__searchHeaderContainer-2JD6q"],resultsContainerQuery:[".result-group-layout__component-1jzTe","#search"]},bilibili:{inputQuery:f.inputQuery,sidebarContainerQuery:["#danmukuBox"],appendContainerQuery:[],resultsContainerQuery:["#danmukuBox"],action:{init:f.init}},youtube:{inputQuery:h.inputQuery,sidebarContainerQuery:['#secondary:not([style*="display: none"]):not(.ytd-two-column-browse-results-renderer)'],appendContainerQuery:[],resultsContainerQuery:['#secondary:not([style*="display: none"]):not(.ytd-two-column-browse-results-renderer)'],action:{init:h.init}},github:{inputQuery:k.inputQuery,sidebarContainerQuery:["#diff",".commit",".Layout-main"],appendContainerQuery:[],resultsContainerQuery:["#diff",".commit",".Layout-main"],action:{init:k.init}},gitlab:{inputQuery:E.inputQuery,sidebarContainerQuery:[".info-well",".js-commit-box-info"],appendContainerQuery:[],resultsContainerQuery:[".info-well",".js-commit-box-info"]},zhihu:{inputQuery:_.inputQuery,sidebarContainerQuery:[".Question-sideColumn",".Post-Header",".Question-main"],appendContainerQuery:[],resultsContainerQuery:[".Question-sideColumn",".Post-Header",".Question-main"]},reddit:{inputQuery:Q.inputQuery,sidebarContainerQuery:["#pdp-right-rail-topics div"],appendContainerQuery:[],resultsContainerQuery:["#pdp-right-rail-topics div"]},quora:{inputQuery:S.inputQuery,sidebarContainerQuery:[".q-box.PageContentsLayout___StyledBox-d2uxks-0"],appendContainerQuery:[],resultsContainerQuery:[".q-box.PageContentsLayout___StyledBox-d2uxks-0"]},stackoverflow:{inputQuery:I.inputQuery,sidebarContainerQuery:["#sidebar"],appendContainerQuery:[],resultsContainerQuery:["#sidebar"]},juejin:{inputQuery:O.inputQuery,sidebarContainerQuery:["div.sidebar"],appendContainerQuery:[],resultsContainerQuery:["div.main-area.article-area > article > div.article-content"]},"mp.weixin.qq":{inputQuery:q.inputQuery,sidebarContainerQuery:[".qr_code_pc","#js_content"],appendContainerQuery:[],resultsContainerQuery:["#js_content"]},followin:{inputQuery:A.inputQuery,sidebarContainerQuery:[],appendContainerQuery:[],resultsContainerQuery:["#article-content","#thead-gallery"]}},Z=n(5433),P=n(3638),N=n(294),R=n(9453),j=n(3150),M=n.n(j),D=n(5434),B=(n(5024),n(8752)),z=n(855),$=n(6345),H=n(4942),K=n(6956),F=n(8726),U=n(6608),W=n(1438),G=n(7771),Y=n(585),X=n(5763),J=n(2764),V=n(8314),ee=Object.prototype.hasOwnProperty;const te=function(e){if(null==e)return!0;if((0,Y.Z)(e)&&((0,G.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,X.Z)(e)||(0,V.Z)(e)||(0,W.Z)(e)))return!e.length;var t=(0,U.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,J.Z)(e))return!(0,F.Z)(e).length;for(var n in e)if(ee.call(e,n))return!1;return!0};var ne=n(1028),re=n(2045);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n,r){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(a.mark((function e(t,n,r,o){var s,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N._4)();case 2:return s=e.sent.customChatGptWebApiUrl,e.next=5,fetch("".concat(s,"/backend-api").concat(r),{method:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(o)});case 5:return i=e.sent,e.next=8,i.text();case 8:return c=e.sent,console.debug("request: ".concat(r),c),e.abrupt("return",{response:i,responseText:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,n){return ue.apply(this,arguments)}function ue(){return(ue=(0,r.Z)(a.mark((function e(t,n,r){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,"PATCH","/conversation/".concat(n),r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,r.Z)(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,ce(t,n,{is_visible:!1});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return fe=(0,r.Z)(a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,se(t,"GET","/models");case 3:if(e.t1=e.sent.responseText,!(n=e.t0.parse.call(e.t0,e.t1)).models){e.next=7;break}return e.abrupt("return",n.models.map((function(e){return e.slug})));case 7:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function me(e,t,n,r){return he.apply(this,arguments)}function he(){return he=(0,r.Z)(a.mark((function e(t,n,o,s){var i,c,u,l,p,d,f,m,h,y,v,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.messageId=(0,re.Z)(),null==o.parentMessageId&&(o.parentMessageId=(0,re.Z)()),i=(0,ne.g9)(t,null,(function(){o.autoClean&&le(s,o.conversationId)})),c=i.controller,u=i.messageListener,l=i.disconnectListener,e.next=5,de(s).catch((function(){t.onMessage.removeListener(u),t.onDisconnect.removeListener(l)}));case 5:return p=e.sent,console.debug("models",p),e.next=9,(0,N._4)();case 9:if(d=e.sent,f=N.kk[o.modelName].value,m=p&&p.includes(f)?f:N.kk[N.wu[0]].value,console.debug("usedModel",m),!j.cookies||!j.cookies.getAll){e.next=17;break}return e.next=16,j.cookies.getAll({url:"https://chat.openai.com/"});case 16:h=e.sent.map((function(e){return"".concat(e.name,"=").concat(e.value)})).join("; ");case 17:if(!(y=!m.includes(N.kk[N.wu[0]].value))||d.chatgptArkoseReqUrl){e.next=20;break}throw new Error((0,B.t)("Please login at https://chat.openai.com first")+"\n\n"+(0,B.t)("Please keep https://chat.openai.com open and try again. If it still doesn't work, type some characters in the input box of chatgpt web page and try again."));case 20:if(!d.chatgptArkoseReqUrl){e.next=26;break}return e.next=23,fetch(d.chatgptArkoseReqUrl+"?"+d.chatgptArkoseReqParams,{method:"POST",body:d.chatgptArkoseReqForm,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){return e.token})).catch((function(){return null}));case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=null;case 27:if(v=e.t0,!y||v){e.next=30;break}throw new Error((0,B.t)("Failed to get arkose token.")+"\n\n"+(0,B.t)("Please keep https://chat.openai.com open and try again. If it still doesn't work, type some characters in the input box of chatgpt web page and try again."));case 30:return b="",e.next=33,(0,K.z)("".concat(d.customChatGptWebApiUrl).concat(d.customChatGptWebApiPath),{method:"POST",signal:c.signal,credentials:"include",headers:oe({"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},h&&{Cookie:h}),body:JSON.stringify({action:"next",conversation_id:o.conversationId||void 0,messages:[{id:o.messageId,author:{role:"user"},content:{content_type:"text",parts:[n]}}],conversation_mode:{kind:"primary_assistant"},force_paragen:!1,force_rate_limit:!1,suggestions:[],model:m,parent_message_id:o.parentMessageId,timezone_offset_min:(new Date).getTimezoneOffset(),history_and_training_disabled:d.disableWebModeHistory,arkose_token:v}),onMessage:function(e){var r,a,s;if(console.debug("sse message",e),"[DONE]"===e.trim())return(0,ne.p6)(o,n,b),console.debug("conversation history",{content:o.conversationRecords}),void t.postMessage({answer:null,done:!0,session:o});try{s=JSON.parse(e)}catch(e){return void console.debug("json error",e)}if(s.error)throw s.error.includes("unusual activity")?new Error("Please keep https://chat.openai.com open and try again. If it still doesn't work, type some characters in the input box of chatgpt web page and try again."):new Error(s.error);s.conversation_id&&(o.conversationId=s.conversation_id),null!==(r=s.message)&&void 0!==r&&r.id&&(o.parentMessageId=s.message.id);var i=null===(a=s.message)||void 0===a||null===(a=a.content)||void 0===a||null===(a=a.parts)||void 0===a?void 0:a[0];i&&(b=i),b&&t.postMessage({answer:b,done:!1,session:null})},onStart:function(){return(0,r.Z)(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onEnd:function(){return(0,r.Z)(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.postMessage({done:!0}),t.onMessage.removeListener(u),t.onDisconnect.removeListener(l);case 3:case"end":return e.stop()}}),e)})))()},onError:function(e){return(0,r.Z)(a.mark((function n(){var r;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.onMessage.removeListener(u),t.onDisconnect.removeListener(l),!(e instanceof Error)){n.next=4;break}throw e;case 4:if(403!==e.status){n.next=6;break}throw new Error("CLOUDFLARE");case 6:return n.next=8,e.json().catch((function(){return{}}));case 8:throw r=n.sent,new Error(te(r)?"".concat(e.status," ").concat(e.statusText):JSON.stringify(r));case 10:case"end":return n.stop()}}),n)})))()}});case 33:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}var ye=n(3324),ve=n(1072),be=n(5697),ge=n.n(be),xe=n(5248),we=n(6010);const ke=e=>"number"==typeof e&&!isNaN(e),Ce=e=>"string"==typeof e,Te=e=>"function"==typeof e,Ee=e=>Ce(e)||Te(e)?e:null,_e=e=>(0,xe.isValidElement)(e)||Ce(e)||Te(e)||ke(e);function Qe(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:a=!0,collapseDuration:o=300}=e;return function(e){let{children:s,position:i,preventExitTransition:c,done:u,nodeRef:l,isIn:p}=e;const d=r?`${t}--${i}`:t,f=r?`${n}--${i}`:n,m=(0,xe.useRef)(0);return(0,xe.useLayoutEffect)((()=>{const e=l.current,t=d.split(" "),n=r=>{r.target===l.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,xe.useEffect)((()=>{const e=l.current,t=()=>{e.removeEventListener("animationend",t),a?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:a}=e;requestAnimationFrame((()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${n}ms`,requestAnimationFrame((()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,u,o):u()};p||(c?t():(m.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))}),[p]),xe.default.createElement(xe.default.Fragment,null,s)}}function Se(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Ie={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter((e=>e!==t));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const n=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)}))}},Oe=e=>{let{theme:t,type:n,...r}=e;return xe.default.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...r})},qe={info:function(e){return xe.default.createElement(Oe,{...e},xe.default.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return xe.default.createElement(Oe,{...e},xe.default.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return xe.default.createElement(Oe,{...e},xe.default.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return xe.default.createElement(Oe,{...e},xe.default.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return xe.default.createElement("div",{className:"Toastify__spinner"})}};function Ae(e){const[,t]=(0,xe.useReducer)((e=>e+1),0),[n,r]=(0,xe.useState)([]),a=(0,xe.useRef)(null),o=(0,xe.useRef)(new Map).current,s=e=>-1!==n.indexOf(e),i=(0,xe.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:s,getToast:e=>o.get(e)}).current;function c(e){let{containerId:t}=e;const{limit:n}=i.props;!n||t&&i.containerId!==t||(i.count-=i.queue.length,i.queue=[])}function u(e){r((t=>null==e?[]:t.filter((t=>t!==e))))}function l(){const{toastContent:e,toastProps:t,staleId:n}=i.queue.shift();d(e,t,n)}function p(e,n){let{delay:r,staleId:s,...c}=n;if(!_e(e)||function(e){return!a.current||i.props.enableMultiContainer&&e.containerId!==i.props.containerId||o.has(e.toastId)&&null==e.updateId}(c))return;const{toastId:p,updateId:f,data:m}=c,{props:h}=i,y=()=>u(p),v=null==f;v&&i.count++;const b={...h,style:h.toastStyle,key:i.toastKey++,...Object.fromEntries(Object.entries(c).filter((e=>{let[t,n]=e;return null!=n}))),toastId:p,updateId:f,data:m,closeToast:y,isIn:!1,className:Ee(c.className||h.toastClassName),bodyClassName:Ee(c.bodyClassName||h.bodyClassName),progressClassName:Ee(c.progressClassName||h.progressClassName),autoClose:!c.isLoading&&(g=c.autoClose,x=h.autoClose,!1===g||ke(g)&&g>0?g:x),deleteToast(){const e=Se(o.get(p),"removed");o.delete(p),Ie.emit(4,e);const n=i.queue.length;if(i.count=null==p?i.count-i.displayedToast:i.count-1,i.count<0&&(i.count=0),n>0){const e=null==p?i.props.limit:1;if(1===n||1===e)i.displayedToast++,l();else{const t=e>n?n:e;i.displayedToast=t;for(let e=0;e<t;e++)l()}}else t()}};var g,x;b.iconOut=function(e){let{theme:t,type:n,isLoading:r,icon:a}=e,o=null;const s={theme:t,type:n};return!1===a||(Te(a)?o=a(s):(0,xe.isValidElement)(a)?o=(0,xe.cloneElement)(a,s):Ce(a)||ke(a)?o=a:r?o=qe.spinner():(e=>e in qe)(n)&&(o=qe[n](s))),o}(b),Te(c.onOpen)&&(b.onOpen=c.onOpen),Te(c.onClose)&&(b.onClose=c.onClose),b.closeButton=h.closeButton,!1===c.closeButton||_e(c.closeButton)?b.closeButton=c.closeButton:!0===c.closeButton&&(b.closeButton=!_e(h.closeButton)||h.closeButton);let w=e;(0,xe.isValidElement)(e)&&!Ce(e.type)?w=(0,xe.cloneElement)(e,{closeToast:y,toastProps:b,data:m}):Te(e)&&(w=e({closeToast:y,toastProps:b,data:m})),h.limit&&h.limit>0&&i.count>h.limit&&v?i.queue.push({toastContent:w,toastProps:b,staleId:s}):ke(r)?setTimeout((()=>{d(w,b,s)}),r):d(w,b,s)}function d(e,t,n){const{toastId:a}=t;n&&o.delete(n);const s={content:e,props:t};o.set(a,s),r((e=>[...e,a].filter((e=>e!==n)))),Ie.emit(4,Se(s,null==s.props.updateId?"added":"updated"))}return(0,xe.useEffect)((()=>(i.containerId=e.containerId,Ie.cancelEmit(3).on(0,p).on(1,(e=>a.current&&u(e))).on(5,c).emit(2,i),()=>{o.clear(),Ie.emit(3,i)})),[]),(0,xe.useEffect)((()=>{i.props=e,i.isToastActive=s,i.displayedToast=n.length})),{getToastToRender:function(t){const n=new Map,r=Array.from(o.values());return e.newestOnTop&&r.reverse(),r.forEach((e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},containerRef:a,isToastActive:s}}function Le(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Ze(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Pe(e){const[t,n]=(0,xe.useState)(!1),[r,a]=(0,xe.useState)(!1),o=(0,xe.useRef)(null),s=(0,xe.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,i=(0,xe.useRef)(e),{autoClose:c,pauseOnHover:u,closeToast:l,onClick:p,closeOnClick:d}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),s.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",b),document.addEventListener("touchmove",v),document.addEventListener("touchend",b);const n=o.current;s.canCloseOnClick=!0,s.canDrag=!0,s.boundingRect=n.getBoundingClientRect(),n.style.transition="",s.x=Le(t.nativeEvent),s.y=Ze(t.nativeEvent),"x"===e.draggableDirection?(s.start=s.x,s.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(s.start=s.y,s.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(t){if(s.boundingRect){const{top:n,bottom:r,left:a,right:o}=s.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&s.x>=a&&s.x<=o&&s.y>=n&&s.y<=r?y():h()}}function h(){n(!0)}function y(){n(!1)}function v(n){const r=o.current;s.canDrag&&r&&(s.didMove=!0,t&&y(),s.x=Le(n),s.y=Ze(n),s.delta="x"===e.draggableDirection?s.x-s.start:s.y-s.start,s.start!==s.x&&(s.canCloseOnClick=!1),r.style.transform=`translate${e.draggableDirection}(${s.delta}px)`,r.style.opacity=""+(1-Math.abs(s.delta/s.removalDistance)))}function b(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",b);const t=o.current;if(s.canDrag&&s.didMove&&t){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return a(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform=`translate${e.draggableDirection}(0)`,t.style.opacity="1"}}(0,xe.useEffect)((()=>{i.current=e})),(0,xe.useEffect)((()=>(o.current&&o.current.addEventListener("d",h,{once:!0}),Te(e.onOpen)&&e.onOpen((0,xe.isValidElement)(e.children)&&e.children.props),()=>{const e=i.current;Te(e.onClose)&&e.onClose((0,xe.isValidElement)(e.children)&&e.children.props)})),[]),(0,xe.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",h),window.addEventListener("blur",y)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",h),window.removeEventListener("blur",y))})),[e.pauseOnFocusLoss]);const g={onMouseDown:f,onTouchStart:f,onMouseUp:m,onTouchEnd:m};return c&&u&&(g.onMouseEnter=y,g.onMouseLeave=h),d&&(g.onClick=e=>{p&&p(e),s.canCloseOnClick&&l()}),{playToast:h,pauseToast:y,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:g}}function Ne(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return xe.default.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":r},xe.default.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},xe.default.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Re(e){let{delay:t,isRunning:n,closeToast:r,type:a="default",hide:o,className:s,style:i,controlledProgress:c,progress:u,rtl:l,isIn:p,theme:d}=e;const f=o||c&&0===u,m={...i,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:f?0:1};c&&(m.transform=`scaleX(${u})`);const h=(0,we.default)("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":l}),y=Te(s)?s({rtl:l,type:a,defaultClassName:h}):(0,we.default)(h,s);return xe.default.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:m,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{p&&r()}})}const je=e=>{const{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:a}=Pe(e),{closeButton:o,children:s,autoClose:i,onClick:c,type:u,hideProgressBar:l,closeToast:p,transition:d,position:f,className:m,style:h,bodyClassName:y,bodyStyle:v,progressClassName:b,progressStyle:g,updateId:x,role:w,progress:k,rtl:C,toastId:T,deleteToast:E,isIn:_,isLoading:Q,iconOut:S,closeOnClick:I,theme:O}=e,q=(0,we.default)("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":I}),A=Te(m)?m({rtl:C,position:f,type:u,defaultClassName:q}):(0,we.default)(q,m),L=!!k||!i,Z={closeToast:p,type:u,theme:O};let P=null;return!1===o||(P=Te(o)?o(Z):(0,xe.isValidElement)(o)?(0,xe.cloneElement)(o,Z):Ne(Z)),xe.default.createElement(d,{isIn:_,done:E,position:f,preventExitTransition:n,nodeRef:r},xe.default.createElement("div",{id:T,onClick:c,className:A,...a,style:h,ref:r},xe.default.createElement("div",{..._&&{role:w},className:Te(y)?y({type:u}):(0,we.default)("Toastify__toast-body",y),style:v},null!=S&&xe.default.createElement("div",{className:(0,we.default)("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Q})},S),xe.default.createElement("div",null,s)),P,xe.default.createElement(Re,{...x&&!L?{key:`pb-${x}`}:{},rtl:C,theme:O,delay:i,isRunning:t,isIn:_,closeToast:p,hide:l,type:u,style:g,className:b,controlledProgress:L,progress:k||0})))},Me=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},De=Qe(Me("bounce",!0)),Be=(Qe(Me("slide",!0)),Qe(Me("zoom")),Qe(Me("flip")),(0,xe.forwardRef)(((e,t)=>{const{getToastToRender:n,containerRef:r,isToastActive:a}=Ae(e),{className:o,style:s,rtl:i,containerId:c}=e;function u(e){const t=(0,we.default)("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":i});return Te(o)?o({position:e,rtl:i,defaultClassName:t}):(0,we.default)(t,Ee(o))}return(0,xe.useEffect)((()=>{t&&(t.current=r.current)}),[]),xe.default.createElement("div",{ref:r,className:"Toastify",id:c},n(((e,t)=>{const n=t.length?{...s}:{...s,pointerEvents:"none"};return xe.default.createElement("div",{className:u(e),style:n,key:`container-${e}`},t.map(((e,n)=>{let{content:r,props:o}=e;return xe.default.createElement(je,{...o,isIn:a(o.toastId),style:{...o.style,"--nth":n+1,"--len":t.length},key:`toast-${o.key}`},r)})))})))})));Be.displayName="ToastContainer",Be.defaultProps={position:"top-right",transition:De,autoClose:5e3,closeButton:Ne,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let ze,$e=new Map,He=[],Ke=1;function Fe(){return""+Ke++}function Ue(e){return e&&(Ce(e.toastId)||ke(e.toastId))?e.toastId:Fe()}function We(e,t){return $e.size>0?Ie.emit(0,e,t):He.push({content:e,options:t}),t.toastId}function Ge(e,t){return{...t,type:t&&t.type||e,toastId:Ue(t)}}function Ye(e){return(t,n)=>We(t,Ge(e,n))}function Xe(e,t){return We(e,Ge("default",t))}Xe.loading=(e,t)=>We(e,Ge("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Xe.promise=function(e,t,n){let r,{pending:a,error:o,success:s}=t;a&&(r=Ce(a)?Xe.loading(a,n):Xe.loading(a.render,{...n,...a}));const i={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,a)=>{if(null==t)return void Xe.dismiss(r);const o={type:e,...i,...n,data:a},s=Ce(t)?{render:t}:t;return r?Xe.update(r,{...o,...s}):Xe(s.render,{...o,...s}),a},u=Te(e)?e():e;return u.then((e=>c("success",s,e))).catch((e=>c("error",o,e))),u},Xe.success=Ye("success"),Xe.info=Ye("info"),Xe.error=Ye("error"),Xe.warning=Ye("warning"),Xe.warn=Xe.warning,Xe.dark=(e,t)=>We(e,Ge("default",{theme:"dark",...t})),Xe.dismiss=e=>{$e.size>0?Ie.emit(1,e):He=He.filter((t=>null!=e&&t.options.toastId!==e))},Xe.clearWaitingQueue=function(e){return void 0===e&&(e={}),Ie.emit(5,e)},Xe.isActive=e=>{let t=!1;return $e.forEach((n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},Xe.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const n=function(e,t){let{containerId:n}=t;const r=$e.get(n||ze);return r&&r.getToast(e)}(e,t);if(n){const{props:r,content:a}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:Fe()};o.toastId!==e&&(o.staleId=e);const s=o.render||a;delete o.render,We(s,o)}}),0)},Xe.done=e=>{Xe.update(e,{progress:1})},Xe.onChange=e=>(Ie.on(4,e),()=>{Ie.off(4,e)}),Xe.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Xe.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Ie.on(2,(e=>{ze=e.containerId||e,$e.set(ze,e),He.forEach((e=>{Ie.emit(0,e.content,e.options)})),He=[]})).on(3,(e=>{$e.delete(e.containerId||e),0===$e.size&&Ie.off(0).off(1).off(5)}));var Je=n(1481),Ve=n(2215);var et=n(6584),tt=function(){var e=(0,ve.$G)().t,t=function(){var e=(0,Je.Z)(),t=(0,Ve.N)();return["auto"===e.themeMode?t:e.themeMode,e]}(),n=(0,ye.Z)(t,2),a=n[0],s=n[1],i={padding:"0 8px",border:"1px solid",borderRadius:"4px",whiteSpace:"nowrap",cursor:"pointer"};return(0,xe.useEffect)((function(){Xe((0,et.BX)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,et.tZ)("div",{children:e("Please keep this tab open. You can now use the web mode of ChatGPTBox")}),(0,et.BX)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,et.tZ)("button",{style:i,onClick:function(){M().runtime.sendMessage({type:"PIN_TAB",data:{saveAsChatgptConfig:!0}})},children:e("Pin Tab")}),(0,et.tZ)("button",{style:i,onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M().runtime,e.next=3,(0,N._4)();case 3:e.t1=e.sent.chatgptJumpBackTabId,e.t2={tabId:e.t1},e.t3={type:"ACTIVATE_URL",data:e.t2},e.t0.sendMessage.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e)}))),children:e("Go Back")})]})]}),{toastId:0,updateId:0})}),[s.themeMode,s.preferredLanguage]),(0,et.tZ)(Be,{style:{width:"440px"},position:"top-right",autoClose:7e3,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,theme:a})};tt.propTypes={container:ge().object.isRequired};const nt=tt;function rt(e,t){return at.apply(this,arguments)}function at(){return(at=(0,r.Z)(o().mark((function e(t,n){var r,a,u,l,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=10,a=location.href,u=1;case 3:if(!(u<=r)){e.next=24;break}if(location.href===a){e.next=7;break}return console.log("SiteAdapters Retry ".concat(u,"/").concat(r,": stop")),e.abrupt("return");case 7:if(!(l=t&&((0,d.$s)(t.sidebarContainerQuery)||(0,d.$s)(t.appendContainerQuery)||(0,d.$s)(t.resultsContainerQuery))||(0,d.$s)([n.prependQuery])||(0,d.$s)([n.appendQuery]))){e.next=14;break}return console.log("SiteAdapters Retry ".concat(u,"/").concat(r,": found")),console.log(l),e.abrupt("break",24);case 14:if(console.log("SiteAdapters Retry ".concat(u,"/").concat(r,": not found")),u!==r){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,new Promise((function(e){return setTimeout(e,500)}));case 21:u++,e.next=3;break;case 24:if(document.querySelectorAll(".chatgptbox-container,#chatgptbox-container").forEach((function(e){(0,s.unmountComponentAtNode)(e),e.remove()})),!n.inputQuery){e.next=29;break}return e.next=28,ot([n.inputQuery]);case 28:p=e.sent;case 29:if(p||!t){e.next=33;break}return e.next=32,ot(t.inputQuery);case 32:p=e.sent;case 33:return document.querySelectorAll(".chatgptbox-container,#chatgptbox-container").forEach((function(e){(0,s.unmountComponentAtNode)(e),e.remove()})),(f=document.createElement("div")).id="chatgptbox-container",e.t0=i.sY,e.t1=et.tZ,e.t2=c.Z,e.t3=z.w,e.next=42,(0,N._4)();case 42:e.t4=e.sent.modelName,e.t5={modelName:e.t4},e.t6=(0,e.t3)(e.t5),e.t7=p,e.t8=t,e.t9=f,e.t10={session:e.t6,question:e.t7,siteConfig:e.t8,container:e.t9},e.t11=(0,e.t1)(e.t2,e.t10),e.t12=f,(0,e.t0)(e.t11,e.t12);case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return st.apply(this,arguments)}function st(){return(st=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t){e.next=13;break}return e.next=3,t();case 3:if(!(n=e.sent)){e.next=12;break}return e.t0="Reply in ",e.next=8,(0,D.rm)();case 8:return e.t1=e.sent,e.t2=e.t0.concat.call(e.t0,e.t1,".\n"),e.t3=n,e.abrupt("return",e.t2+e.t3);case 12:return e.abrupt("return",n);case 13:if(!(r=(0,d.$s)(t))){e.next=26;break}if(r.value?n=r.value:r.textContent&&(n=r.textContent),!n){e.next=26;break}return e.t4="Reply in ",e.next=20,(0,D.rm)();case 20:return e.t5=e.sent,e.t6=e.t4.concat.call(e.t4,e.t5,".\nThe following is a search input in a search engine, "),e.t7=e.t6+"giving useful content or solutions and as much information as you can related to it, ",e.t8=e.t7+"use markdown syntax to make your answer more readable, such as code blocks, bold, list:\n",e.t9=n,e.abrupt("return",e.t8+e.t9);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it,ct,ut,lt=function(){it&&"chatgptbox-toolbar-container"===it.className&&it.remove()},pt=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.className="chatgptbox-toolbar-container",e.t0=i.sY,e.t1=et.tZ,e.t2=R.Z,e.t3=z.w,e.next=7,(0,N._4)();case 7:e.t4=e.sent.modelName,e.t5={modelName:e.t4},e.t6=(0,e.t3)(e.t5),e.t7=n,e.t8=t,e.t9={session:e.t6,selection:e.t7,container:e.t8,dockable:!0},e.t10=(0,e.t1)(e.t2,e.t9),e.t11=t,(0,e.t0)(e.t10,e.t11);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function dt(){return ft.apply(this,arguments)}function ft(){return(ft=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("mouseup",(function(e){var t,n;if(!it||!it.contains(e.target)){var a=(null===(t=window.getSelection())||void 0===t?void 0:t.rangeCount)>0&&(null===(n=window.getSelection())||void 0===n?void 0:n.getRangeAt(0).endContainer.parentElement);it&&a&&it.contains(a)||(lt(),setTimeout((0,r.Z)(o().mark((function t(){var n,r,s,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=null===(n=window.getSelection())||void 0===n?void 0:n.toString().trim().replace(/^-+|-+$/g,""))){t.next=9;break}return t.next=4,(0,N._4)();case 4:return t.sent.selectionToolsNextToInputBox?(i=a.querySelector("input, textarea"),s=i?{x:(s=(0,d.sj)(i)).x+window.scrollX+i.offsetWidth+50,y:e.pageY+30}:{x:e.pageX+20,y:e.pageY+20}):s={x:e.pageX+20,y:e.pageY+20},it=(0,d.zl)(s.x,s.y),t.next=9,pt(it,r);case 9:case"end":return t.stop()}}),t)})))))}})),document.addEventListener("mousedown",(function(e){it&&it.contains(e.target)||document.querySelectorAll(".chatgptbox-toolbar-container").forEach((function(e){return e.remove()}))})),document.addEventListener("keydown",(function(e){!it||it.contains(e.target)||"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName||setTimeout((function(){var e;null!==(e=window.getSelection())&&void 0!==e&&e.toString().trim()||lt()}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(){return ht.apply(this,arguments)}function ht(){return(ht=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("touchend",(function(e){var t,n;it&&it.contains(e.target)||it&&(null===(t=window.getSelection())||void 0===t?void 0:t.rangeCount)>0&&it.contains(null===(n=window.getSelection())||void 0===n?void 0:n.getRangeAt(0).endContainer.parentElement)||(lt(),setTimeout((function(){var t,n=null===(t=window.getSelection())||void 0===t?void 0:t.toString().trim().replace(/^-+|-+$/g,"");n&&(it=(0,d.zl)(e.changedTouches[0].pageX+20,e.changedTouches[0].pageY+20),pt(it,n))})))})),document.addEventListener("touchstart",(function(e){it&&it.contains(e.target)||document.querySelectorAll(".chatgptbox-toolbar-container").forEach((function(e){return e.remove()}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return vt.apply(this,arguments)}function vt(){return vt=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("contextmenu",(function(e){ct=e.clientX,ut=e.clientY})),M().runtime.onMessage.addListener(function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CREATE_CHAT"!==t.type){e.next=49;break}if(n=t.data,r="",!(n.itemId in Z.v)){e.next=9;break}return e.next=6,Z.v[n.itemId].genPrompt(n.selectionText);case 6:r=e.sent,e.next=30;break;case 9:if(!(n.itemId in P.v)){e.next=30;break}if((a=P.v[n.itemId]).genPrompt){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,a.genPrompt();case 17:r=e.sent;case 18:if(!r){e.next=30;break}return e.t0=d.Kj,e.t1="Reply in ",e.next=23,(0,D.rm)();case 23:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2,".\n"),e.t4=r,e.t5=e.t3+e.t4,e.next=29,(0,e.t0)(e.t5);case 29:r=e.sent;case 30:return s=n.useMenuPosition?{x:ct,y:ut}:{x:window.innerWidth/2-300,y:window.innerHeight/2-200},(c=(0,d.zl)(s.x,s.y)).className="chatgptbox-toolbar-container-not-queryable",e.t6=i.sY,e.t7=et.tZ,e.t8=R.Z,e.t9=z.w,e.next=39,(0,N._4)();case 39:e.t10=e.sent.modelName,e.t11={modelName:e.t10},e.t12=(0,e.t9)(e.t11),e.t13=n.selectionText,e.t14=c,e.t15=r,e.t16={session:e.t12,selection:e.t13,container:e.t14,triggered:!0,closeable:!0,prompt:e.t15},e.t17=(0,e.t7)(e.t8,e.t16),e.t18=c,(0,e.t6)(e.t17,e.t18);case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}function bt(){return gt.apply(this,arguments)}function gt(){return(gt=(0,r.Z)(o().mark((function e(){var t,n,r,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N._4)();case 2:if(t=e.sent,n=t.useSiteRegexOnly?t.siteRegex:new RegExp((t.siteRegex&&t.siteRegex+"|")+Object.keys(L).join("|")),!(r=location.hostname.match(n))){e.next=17;break}if(a=r[0],!t.siteAdapters.includes(a)||t.activeSiteAdapters.includes(a)){e.next=9;break}return e.abrupt("return");case 9:if(s=!0,!(a in L)){e.next=16;break}if(!(i=L[a].action)||!i.init){e.next=16;break}return e.next=15,i.init(location.hostname,t,ot,rt);case 15:s=e.sent;case 16:s&&rt(L[a],t);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return wt.apply(this,arguments)}function wt(){return(wt=(0,r.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("chat.openai.com"===location.hostname){e.next=2;break}return e.abrupt("return");case 2:if("/api/auth/session"!==location.pathname){e.next=7;break}n=document.querySelector("pre").textContent;try{t=JSON.parse(n)}catch(e){console.error("json error",e)}e.next=13;break;case 7:return e.next=9,fetch("https://chat.openai.com/api/auth/session");case 9:return r=e.sent,e.next=12,r.json().catch((function(){return{}}));case 12:t=e.sent;case 13:if(!t||!t.accessToken){e.next=17;break}return e.next=16,(0,N.M8)(t.accessToken);case 16:console.log(t.accessToken);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,r.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("chat.openai.com"===location.hostname&&"/auth/login"!==location.pathname){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,N._4)();case 4:if(t=e.sent,N.wu.some((function(e){return t.activeApiModes.includes(e)}))){e.next=7;break}return e.abrupt("return");case 7:return N.wu.includes(t.modelName)&&(n=document.createElement("div"),document.body.append(n),(0,i.sY)((0,et.tZ)(nt,{container:n}),n)),"/"===location.pathname&&(a=document.querySelector("#prompt-textarea"))&&(a.textContent=" ",a.dispatchEvent(new Event("input",{bubbles:!0})),setTimeout((function(){a.textContent="",a.dispatchEvent(new Event("input",{bubbles:!0}))}),300)),e.next=11,M().runtime.sendMessage({type:"SET_CHATGPT_TAB",data:{}});case 11:(0,$.Ky)(function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.wu.includes(t.modelName)){e.next=6;break}return e.next=3,(0,$.I)();case 3:return r=e.sent,e.next=6,me(n,t.question,t,r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}function Tt(){return Tt=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.vq)().then((function(e){(0,B.D0)(e)}));case 2:return M().runtime.onMessage.addListener(function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"CHANGE_LANG"===t.type&&(n=t.data,(0,B.D0)(n.lang));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,xt();case 5:return e.next=7,kt();case 7:dt(),mt(),bt(),yt();case 11:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}!function(){Tt.apply(this,arguments)}()},3638:(e,t,n)=>{n.d(t,{v:()=>h});var r,a,o,s,i,c,u=n(5861),l=n(4687),p=n(752),d=n(3150),f=n(294),m=n(9616),h={newChat:{label:"New Chat",genPrompt:(c=(0,u.Z)(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},summarizePage:{label:"Summarize Page",genPrompt:(i=(0,u.Z)(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","The following is the text content of a web page, analyze the core content and summarize:\n".concat((0,p.i)()));case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},openConversationPage:{label:"Open Conversation Page",action:(s=(0,u.Z)(l.mark((function e(t){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("action is from background",t),t?(0,m.Y)(d.runtime.getURL("IndependentPanel.html")):d.runtime.sendMessage({type:"OPEN_URL",data:{url:d.runtime.getURL("IndependentPanel.html")}});case 2:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},openConversationWindow:{label:"Open Conversation Window",action:(o=(0,u.Z)(l.mark((function e(t){var n,r,a;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.debug("action is from background",t),!t){e.next=18;break}return e.next=4,(0,f._4)();case 4:return n=e.sent,r=d.runtime.getURL("IndependentPanel.html"),e.next=8,d.tabs.query({url:r,windowType:"popup"});case 8:if(a=e.sent,n.alwaysCreateNewConversationWindow||!(a.length>0)){e.next=14;break}return e.next=12,d.windows.update(a[0].windowId,{focused:!0});case 12:e.next=16;break;case 14:return e.next=16,d.windows.create({url:r,type:"popup",width:500,height:650});case 16:e.next=19;break;case 18:d.runtime.sendMessage({type:"OPEN_CHAT_WINDOW",data:{}});case 19:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},openSidePanel:{label:"Open Side Panel",action:(a=(0,u.Z)(l.mark((function e(t,n){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("action is from background",t),t&&chrome.sidePanel.open({windowId:n.windowId,tabId:n.id});case 2:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},closeAllChats:{label:"Close All Chats In This Page",action:(r=(0,u.Z)(l.mark((function e(t){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("action is from background",t),d.tabs.query({active:!0,currentWindow:!0}).then((function(e){d.tabs.sendMessage(e[0].id,{type:"CLOSE_CHATS",data:{}})}));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})}}},2215:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(3324),a=n(5248);function o(){var e=(0,a.useState)(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,a.useEffect)((function(){if(window.matchMedia){var e=function(e){o(e.matches?"dark":"light")};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),function(){return window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)}}}),[]),n}}},e=>{var t;t=6935,e(e.s=t)}]);